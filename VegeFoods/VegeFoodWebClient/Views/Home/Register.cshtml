
@{
    Layout = "_LoginAndRegister";

}

<section class="ftco-section contact-section">
    <div class="container">

        <div class="row block-9">
            <div class="col-md-6 order-md-last d-flex">
                <form id="registorForm" action="#" class="bg-white p-5 contact-form">
                    <div class="form-group">
                        <h2>Let's Register</h2>
                    </div>
                    <div class="form-group">
                        <input type="text" id="UserName" name="username" class="form-control" placeholder="Enter your Username">
                    </div>
                    <div class="form-group">
                        <input type="password" id="Password" name="password" class="form-control" placeholder="Enter your Password">
                    </div>
                    <div class="form-group">
                        <input type="password" id="RePassword" class="form-control" placeholder="Re-enter your Password">
                    </div>
                    <div class="form-group">
                        <input type="email" id="Email" name="email" class="form-control" placeholder="Enter your Email">
                    </div>
                    <div class="form-group">
                        <input type="text" id="Phone" name="phone" class="form-control" placeholder="Enter your Phone number">
                    </div>
                    <div class="form-group">
                        <input type="text" id="FullName" name="fullName" class="form-control" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <input style="display: flex" id="submit" type="button" value="Register" class="btn btn-primary py-3 px-5">
                    </div>
                    <div class="form-group">
                        <a href="/Home/Login">Back to Login page</a>
                    </div>
                </form>

            </div>

            <div class="col-md-6 d-flex">
                <div class="hero-wrap hero-bread" style="background-image: url('/images/loginbg.jpg');"></div>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(document).ready(() => {
            console.log("ok");

            $('#submit').click(() => {
                debugger
                if ($('#Password').val() != $('#RePassword').val()) {
                    alert("Re-Enter Password wrong!");
                }
                else {
                    let usernameR = $('#UserName').val(),
                        passwordR = $('#Password').val(),
                        emailR = $('#Email').val(),
                        phoneR = $('#Phone').val(),
                        fullNameR = $('#FullName').val();
                        

                    $.ajax({
                        url: 'http://localhost:5104/api/Login/Registor',
                        method: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify({
                            "username": usernameR,
                            "password": passwordR,
                            "email": emailR,
                            "phone": phoneR,
                            "fullName": fullNameR
                        }),
                        success: function (data) {
                            console.log(data);
                            alert("Registor successfully");
                        },
                        error: function (xhr, status, error) {
                            console.log("error");
                            console.log(usernameR + "\n" + passwordR + "\n" + emailR + "\n"+ phoneR + "\n" + fullNameR);
                        }

                    })
                }
            })
        });


    </script>
}
